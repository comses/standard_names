#! /usr/bin/env python

import os
from standard_names import (from_model_file, FORMATTERS)

def main ():
    import argparse

    parser = argparse.ArgumentParser (
        'Scan a model description file for CSDMS standard names')
    parser.add_argument ('file', type=argparse.FileType ('r'),
                         help='YAML file describing model exchange items')
    args = parser.parse_args ()

    names = from_model_file (args.file)

    format = FORMATTERS['yaml']

    print '%YAML 1.2'
    print '---'

    print os.linesep.join ([
        format (names.unique_names (), sorted=True, heading='names'),
        '---',
        format (names.unique_objects (), sorted=True, heading='objects'),
        '---',
        format (names.unique_quantities (), sorted=True, heading='quantities'),
        '---',
        format (names.unique_operators (), sorted=True, heading='operators'),
        '...',
    ])

if __name__ == '__main__':
    main ()

